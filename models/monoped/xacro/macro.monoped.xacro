<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="hexapod">

	<xacro:include filename="$(find hex)/models/monoped/xacro/macro.internal_config.xacro"/>
	<xacro:include filename="$(find hex)/models/monoped/xacro/macro.transmission.xacro"/>

	<xacro:macro name="leg" params="namespace legnumber xyz lower_bc upper_bc lower_cf upper_cf lower_ft upper_ft" >

        <link name="coxa_${legnumber}">
            <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                    <mesh filename="package://hex/models/hexapod/meshes/leg/assembler.stl" scale="1 1 1"/>
            </geometry>
                <material name="green">
                    <color rgba="0 0.6 0 1"/>
                </material>
            </visual> 
            <collision>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <mesh filename="package://hex/models/hexapod/meshes/leg/assembler.stl" scale="1 1 1"/>
                </geometry> 
            </collision>   
            <inertial>
                <mass value="2"/>
                <inertia ixx="0.04" ixy="0.0" ixz="0.0" iyy="0.17" iyz="0.0" izz="0.25"/>
            </inertial>          
        </link>

        <link name="femur_${legnumber}">
            <visual>
            <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
            <geometry>
                    <mesh filename="package://hex/models/hexapod/meshes/leg/upperleg.stl" scale="0.8 1 1"/>
            </geometry>
                <material name="orange">
                    <color rgba="0.8 0.5 0 1"/>
                </material>	  
            </visual>
            <collision>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <mesh filename="package://hex/models/hexapod/meshes/leg/upperleg.stl" scale="0.8 1 1"/>
                </geometry> 
            </collision>   
            <inertial>
                <mass value="2"/>
                <inertia ixx="0.04" ixy="0.0" ixz="0.0" iyy="0.17" iyz="0.0" izz="0.25"/>
            </inertial>   
        </link>


        <link name="tibia_${legnumber}">
            <visual>
            <geometry>
                    <mesh filename="package://hex/models/hexapod/meshes/leg/lowerleg.stl" scale="1.4 1 1"/>
            </geometry>
                <material name="blue">
                    <color rgba="0 0 0.5 1"/>
                </material>	  
            </visual> 
            <collision>
                <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
                <geometry>
                    <mesh filename="package://hex/models/hexapod/meshes/leg/lowerleg.stl" scale="1.4 1 1"/>
                </geometry> 
            </collision>   
            <inertial>
                <mass value="2"/>
                <inertia ixx="0.04" ixy="0.0" ixz="0.0" iyy="0.17" iyz="0.0" izz="0.25"/>
            </inertial>       
        </link>

        <joint name="base-coxa-joint-${legnumber}" type="revolute">
            <origin xyz="${xyz}" rpy="0 0 0"/>
            <parent link="base"/>
            <child  link="coxa_${legnumber}"/>
            <limit effort="50" lower="${lower_bc}" upper="${upper_bc}" velocity="1.0"/>
            <axis xyz="0 0 1"/>
            <dynamics damping="60.0" friction="4.0"/>
        </joint>

        <joint name="coxa-femur-joint-${legnumber}" type="revolute">
            <origin xyz="0.08 0.0 0.0" rpy="1.57 0.0 0.0"/>
            <parent link="coxa_${legnumber}"/>
            <child  link="femur_${legnumber}"/>
            <limit effort="200" lower="${lower_cf}" upper="${upper_cf}" velocity="1.0"/>
            <axis xyz="0 0 1"/>
            <dynamics damping="60.0" friction="4.0"/>
        </joint>

        <joint name="femur-tibia-joint-${legnumber}" type="revolute">
            <origin xyz="0.27 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <parent link="femur_${legnumber}"/>
            <child  link="tibia_${legnumber}"/>
            <limit effort="200" lower="${lower_ft}" upper="${upper_ft}" velocity="1.0"/>
            <axis xyz="0 0 1"/>
            <dynamics damping="0.7" friction="0.1"/>
        </joint>

		<xacro:dsr_config_coeff legnumber="${legnumber}"/>
		<xacro:leg_transmissions legnumber="${legnumber}"/>
<!--         <xacro:gazebo_control /> -->
<!--         <xacro:bumper_ctr_sensor /> -->
        
	</xacro:macro>
</robot>
